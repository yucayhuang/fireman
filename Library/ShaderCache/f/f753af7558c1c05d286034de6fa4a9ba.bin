a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(22),h=(d(g),c(16),function(){function a(b){var c=b.timeEndpoint;e(this,a),this._timeEndpoint=c}return f(a,[{key:"onReconnection",value:function(a){this._reconnectionCallback=a}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var a=this;this._timeEndpoint(function(b){b.error||(clearInterval(a._timeTimer),a._reconnectionCallback())})}}]),a}());b.default=h,a.exports=b.default},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNTimeOperation}function f(){return"/time/0"}function g(a){return a.config.getTransactionTimeout()}function h(){return{}}function i(){return!1}function j(a,b){return{timetoken:b[0]}}function k(){}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.getURL=f,b.getRequestTimeout=g,b.prepareParams=h,b.isAuthSupported=i,b.handleResponse=j,b.validateParams=k;var l=(c(16),c(23)),m=d(l)},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerAudit:"PNAccessManagerAudit"},a.exports=b.default},function(a,b){"use strict";function c(a){var b=[];return Object.keys(a).forEach(function(a){return b.push(a)}),b}function d(a){return encodeURIComponent(a).replace(/[!~*'()]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function e(a){return c(a).sort()}function f(a){return e(a).map(function(b){return b+"="+d(a[b])}).join("&")}function g(a,b){return-1!==a.indexOf(b,this.length-b.length)}function h(){var a=void 0,b=void 0;return{promise:new Promise(function(c,d){a=c,b=d}),reject:b,fulfill:a}}a.exports={signPamFromParams:f,endsWith:g,createPromise:h,encodeString:d}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){return a.type=b,a}function i(a){return h({message:a},"validationError")}function j(a,b,c){return a.usePost&&a.usePost(b,c)?a.postURL(b,c):a.getURL(b,c)}function k(a){var b="PubNub-JS-"+a.sdkFamily;return a.partnerId&&(b+="-"+a.partnerId),b+="/"+a.getVersion()}function l(a,b,c){var d=a.config,e=a.crypto;c.timestamp=Math.floor((new Date).getTime()/1e3);var f=d.subscribeKey+"\n"+d.publishKey+"\n"+b+"\n";f+=p.default.signPamFromParams(c);var g=e.HMACSHA256(f);g=g.replace(/\+/g,"-"),g=g.replace(/\//g,"_"),c.signature=g}Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b){var c=a.networking,d=a.config,e=null,f=null,g={};b.getOperation()===s.default.PNTimeOperation||b.getOperation()===s.default.PNChannelGroupsOperation?e=arguments.length<=2?void 0:arguments[2]:(g=arguments.length<=2?void 0:arguments[2],e=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||e||(f=p.default.createPromise());var h=b.validateParams(a,g);if(!h){var m=b.prepareParams(a,g),o=j(b,a,g),q=void 0,r={url:o,operation:b.getOperation(),timeout:b.getRequestTimeout(a)};m.uuid=d.UUID,m.pnsdk=k(d),d.useInstanceId&&(m.instanceid=d.instanceId),d.useRequestId&&(m.requestid=n.default.v4()),b.isAuthSupported()&&d.getAuthKey()&&(m.auth=d.getAuthKey()),d.secretKey&&l(a,o,m);var u=function(c,d){if(c.error)return void(e?e(c):f&&f.reject(new t("PubNub call failed, check status for details",c)));var h=b.handleResponse(a,d,g);e?e(c,h):f&&f.fulfill(h)};if(b.usePost&&b.usePost(a,g)){var v=b.postPayload(a,g);q=c.POST(m,v,r,u)}else q=c.GET(m,r,u);return b.getOperation()===s.default.PNSubscribeOperation?q:f?f.promise:void 0}return e?e(i(h)):f?(f.reject(new t("Validation failed, check status for details",i(h))),f.promise):void 0};var m=c(2),n=d(m),o=(c(16),c(24)),p=d(o),q=c(15),r=(d(q),c(23)),s=d(r),t=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return d.name=d.constructor.name,d.status=c,d.message=a,d}return g(b,a),b}(Error);a.exports=b.default},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNAddChannelsToGroupOperation}function f(a,b){var c=b.channels,d=b.channelGroup,e=a.config;return d?c&&0!==c.length?e.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"}function g(a,b){var c=b.channelGroup;return"/v1/channel-registration/sub-key/"+a.config.subscribeKey+"/channel-group/"+o.default.encodeString(c)}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){var c=b.channels;return{add:(void 0===c?[]:c).join(",")}}function k(){return{}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l),n=c(24),o=d(n)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNRemoveChannelsFromGroupOperation}function f(a,b){var c=b.channels,d=b.channelGroup,e=a.config;return d?c&&0!==c.length?e.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"}function g(a,b){var c=b.channelGroup;return"/v1/channel-registration/sub-key/"+a.config.subscribeKey+"/channel-group/"+o.default.encodeString(c)}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){var c=b.channels;return{remove:(void 0===c?[]:c).join(",")}}function k(){return{}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l),n=c(24),o=d(n)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNRemoveGroupOperation}function f(a,b){var c=b.channelGroup,d=a.config;return c?d.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"}function g(a,b){var c=b.channelGroup;return"/v1/channel-registration/sub-key/"+a.config.subscribeKey+"/channel-group/"+o.default.encodeString(c)+"/remove"}function h(){return!0}function i(a){return a.config.getTransactionTimeout()}function j(){return{}}function k(){return{}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.isAuthSupported=h,b.getRequestTimeout=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l),n=c(24),o=d(n)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNChannelGroupsOperation}function f(a){if(!a.config.subscribeKey)return"Missing Subscribe Key"}function g(a){return"/v1/channel-registration/sub-key/"+a.config.subscribeKey+"/channel-group"}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(){return{}}function k(a,b){return{groups:b.payload.groups}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNChannelsForGroupOperation}function f(a,b){var c=b.channelGroup,d=a.config;return c?d.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"}function g(a,b){var c=b.channelGroup;return"/v1/channel-registration/sub-key/"+a.config.subscribeKey+"/channel-group/"+o.default.encodeString(c)}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(){return{}}function k(a,b){return{channels:b.payload.channels}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l),n=c(24),o=d(n)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNPushNotificationEnabledChannelsOperation}function f(a,b){var c=b.device,d=b.pushGateway,e=b.channels,f=a.config;return c?d?e&&0!==e.length?f.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"}function g(a,b){var c=b.device;return"/v1/push/sub-key/"+a.config.subscribeKey+"/devices/"+c}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){var c=b.pushGateway,d=b.channels;return{type:c,add:(void 0===d?[]:d).join(",")}}function k(){return{}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNPushNotificationEnabledChannelsOperation}function f(a,b){var c=b.device,d=b.pushGateway,e=b.channels,f=a.config;return c?d?e&&0!==e.length?f.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"}function g(a,b){var c=b.device;return"/v1/push/sub-key/"+a.config.subscribeKey+"/devices/"+c}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){var c=b.pushGateway,d=b.channels;return{type:c,remove:(void 0===d?[]:d).join(",")}}function k(){return{}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNPushNotificationEnabledChannelsOperation}function f(a,b){var c=b.device,d=b.pushGateway,e=a.config;return c?d?e.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"}function g(a,b){var c=b.device;return"/v1/push/sub-key/"+a.config.subscribeKey+"/devices/"+c}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){return{type:b.pushGateway}}function k(a,b){return{channels:b}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNRemoveAllPushNotificationsOperation}function f(a,b){var c=b.device,d=b.pushGateway,e=a.config;return c?d?e.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"}function g(a,b){var c=b.device;return"/v1/push/sub-key/"+a.config.subscribeKey+"/devices/"+c+"/remove"}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){return{type:b.pushGateway}}function k(){return{}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNUnsubscribeOperation}function f(a){if(!a.config.subscribeKey)return"Missing Subscribe Key"}function g(a,b){var c=a.config,d=b.channels,e=void 0===d?[]:d,f=e.length>0?e.join(","):",";return"/v2/presence/sub-key/"+c.subscribeKey+"/channel/"+o.default.encodeString(f)+"/leave"}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){var c=b.channelGroups,d=void 0===c?[]:c,e={};return d.length>0&&(e["channel-group"]=d.join(",")),e}function k(){return{}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l),n=c(24),o=d(n)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNWhereNowOperation}function f(a){if(!a.config.subscribeKey)return"Missing Subscribe Key"}function g(a,b){var c=a.config,d=b.uuid,e=void 0===d?c.UUID:d;return"/v2/presence/sub-key/"+c.subscribeKey+"/uuid/"+e}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(){return{}}function k(a,b){return{channels:b.payload.channels}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNHeartbeatOperation}function f(a){if(!a.config.subscribeKey)return"Missing Subscribe Key"}function g(a,b){var c=a.config,d=b.channels,e=void 0===d?[]:d,f=e.length>0?e.join(","):",";return"/v2/presence/sub-key/"+c.subscribeKey+"/channel/"+o.default.encodeString(f)+"/heartbeat"}function h(){return!0}function i(a){return a.config.getTransactionTimeout()}function j(a,b){var c=b.channelGroups,d=void 0===c?[]:c,e=b.state,f=void 0===e?{}:e,g=a.config,h={};return d.length>0&&(h["channel-group"]=d.join(",")),h.state=JSON.stringify(f),h.heartbeat=g.getPresenceTimeout(),h}function k(){return{}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.isAuthSupported=h,b.getRequestTimeout=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l),n=c(24),o=d(n)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNGetStateOperation}function f(a){if(!a.config.subscribeKey)return"Missing Subscribe Key"}function g(a,b){var c=a.config,d=b.uuid,e=void 0===d?c.UUID:d,f=b.channels,g=void 0===f?[]:f,h=g.length>0?g.join(","):",";return"/v2/presence/sub-key/"+c.subscribeKey+"/channel/"+o.default.encodeString(h)+"/uuid/"+e}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){var c=b.channelGroups,d=void 0===c?[]:c,e={};return d.length>0&&(e["channel-group"]=d.join(",")),e}function k(a,b,c){var d=c.channels,e=void 0===d?[]:d,f=c.channelGroups,g=void 0===f?[]:f,h={};return 1===e.length&&0===g.length?h[e[0]]=b.payload:h=b.payload,{channels:h}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l),n=c(24),o=d(n)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNSetStateOperation}function f(a,b){var c=a.config;return b.state?c.subscribeKey?void 0:"Missing Subscribe Key":"Missing State"}function g(a,b){var c=a.config,d=b.channels,e=void 0===d?[]:d,f=e.length>0?e.join(","):",";return"/v2/presence/sub-key/"+c.subscribeKey+"/channel/"+o.default.encodeString(f)+"/uuid/"+c.UUID+"/data"}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){var c=b.state,d=b.channelGroups,e=void 0===d?[]:d,f={};return f.state=JSON.stringify(c),e.length>0&&(f["channel-group"]=e.join(",")),f}function k(a,b){return{state:b.payload}}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l),n=c(24),o=d(n)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNHereNowOperation}function f(a){if(!a.config.subscribeKey)return"Missing Subscribe Key"}function g(a,b){var c=a.config,d=b.channels,e=void 0===d?[]:d,f=b.channelGroups,g=void 0===f?[]:f,h="/v2/presence/sub-key/"+c.subscribeKey;if(e.length>0||g.length>0){var i=e.length>0?e.join(","):",";h+="/channel/"+o.default.encodeString(i)}return h}function h(a){return a.config.getTransactionTimeout()}function i(){return!0}function j(a,b){var c=b.channelGroups,d=void 0===c?[]:c,e=b.includeUUIDs,f=void 0===e||e,g=b.includeState,h=void 0!==g&&g,i={};return f||(i.disable_uuids=1),h&&(i.state=1),d.length>0&&(i["channel-group"]=d.join(",")),i}function k(a,b,c){var d=c.channels,e=void 0===d?[]:d,f=c.channelGroups,g=void 0===f?[]:f,h=c.includeUUIDs,i=void 0===h||h,j=c.includeState,k=void 0!==j&&j,l=function(){var a={},c=[];return a.totalChannels=1,a.totalOccupancy=b.occupancy,a.channels={},a.channels[e[0]]={occupants:c,name:e[0],occupancy:b.occupancy},i&&b.uuids.forEach(function(a){k?c.push({state:a.state,uuid:a.uuid}):c.push({state:null,uuid:a})}),a},m=function(){var a={};return a.totalChannels=b.payload.total_channels,a.totalOccupancy=b.payload.total_occupancy,a.channels={},Object.keys(b.payload.channels).forEach(function(c){var d=b.payload.channels[c],e=[];return a.channels[c]={occupants:e,name:c,occupancy:d.occupancy},i&&d.uuids.forEach(function(a){k?e.push({state:a.state,uuid:a.uuid}):e.push({state:null,uuid:a})}),a}),a};return e.length>1||g.length>0||0===g.length&&0===e.length?m():l()}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l),n=c(24),o=d(n)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNAccessManagerAudit}function f(a){if(!a.config.subscribeKey)return"Missing Subscribe Key"}function g(a){return"/v2/auth/audit/sub-key/"+a.config.subscribeKey}function h(a){return a.config.getTransactionTimeout()}function i(){return!1}function j(a,b){var c=b.channel,d=b.channelGroup,e=b.authKeys,f=void 0===e?[]:e,g={};return c&&(g.channel=c),d&&(g["channel-group"]=d),f.length>0&&(g.auth=f.join(",")),g}function k(a,b){return b.payload}Object.defineProperty(b,"__esModule",{value:!0}),b.getOperation=e,b.validateParams=f,b.getURL=g,b.getRequestTimeout=h,b.isAuthSupported=i,b.prepareParams=j,b.handleResponse=k;var l=(c(16),c(23)),m=d(l)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return m.default.PNAccessManagerGrant}function f(a){if(!a.config.subscribeKey)return"Missing Subscribe Key"}function g(a){return"/v2/auth/grant/sub-key/"+a.config.subscribeKey}function h(a){return a.con